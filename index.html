<!doctype html>
<html lang="ms">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>ROSES â€¢ Login Gateway</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    :root{
      --r-red:#dc2626; --r-blue:#2563eb; --r-green:#16a34a; --r-white:#ffffff;
      --bg:#0b1220; --muted:#9fb0d0;
      --radius:20px;
    }
    body{
      min-height:100vh;
      background:
        radial-gradient(900px 450px at 10% 10%, rgba(37,99,235,.22), transparent 60%),
        radial-gradient(700px 420px at 90% 10%, rgba(220,38,38,.22), transparent 60%),
        radial-gradient(700px 520px at 50% 100%, rgba(22,163,74,.18), transparent 65%),
        linear-gradient(180deg, #070b14 0%, #0b1220 60%, #070b14 100%);
      color:#eaf0ff;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
    }
    .brand-pill{
      display:inline-flex; align-items:center; gap:.6rem;
      padding:.5rem .75rem;
      border:1px solid rgba(255,255,255,.12);
      border-radius:999px;
      background:rgba(255,255,255,.05);
      backdrop-filter: blur(10px);
    }
    .logo{
      width:38px; height:38px; border-radius:12px;
      background: linear-gradient(135deg, var(--r-red), var(--r-blue));
      display:grid; place-items:center; font-weight:800;
      box-shadow: 0 14px 40px rgba(0,0,0,.35);
    }
    .cardx{
      border-radius:var(--radius);
      background:rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.12);
      box-shadow: 0 22px 80px rgba(0,0,0,.45);
      overflow:hidden;
    }
    .cardx .inner{
      padding:28px;
      background:
        radial-gradient(900px 400px at 20% 0%, rgba(37,99,235,.15), transparent 55%),
        radial-gradient(700px 360px at 90% 40%, rgba(220,38,38,.12), transparent 58%),
        rgba(255,255,255,.02);
    }
    .btn-roses{
      border:none;
      background: linear-gradient(135deg, var(--r-red), var(--r-blue));
      box-shadow: 0 14px 40px rgba(37,99,235,.18), 0 14px 40px rgba(220,38,38,.18);
    }
    .btn-roses:hover{ filter: brightness(1.05); }
    .meta{ color:var(--muted); font-size:.9rem; }
    .divider{ height:1px; background:rgba(255,255,255,.10); margin:18px 0; }
    a.link{ color:#cfe0ff; text-decoration:none; border-bottom:1px dashed rgba(207,224,255,.55); }
    a.link:hover{ color:#fff; border-bottom-color:#fff; }
    .badge-soft{ background:rgba(255,255,255,.10); border:1px solid rgba(255,255,255,.14); }
  </style>
</head>
<body>
  <main class="container py-5">
    <div class="row justify-content-center">
      <div class="col-lg-8 col-xl-7">
        <div class="d-flex justify-content-between align-items-center mb-3">
          <div class="brand-pill">
            <div class="logo">R</div>
            <div>
              <div class="fw-bold lh-1">ROSES</div>
              <div class="meta lh-1">Login Gateway</div>
            </div>
          </div>
          <span class="badge badge-soft rounded-pill px-3 py-2">Merah â€¢ Putih â€¢ Biru â€¢ Hijau</span>
        </div>

        <div class="cardx">
          <div class="inner">
            <h1 class="h3 fw-bold mb-2">Selamat Datang ðŸ‘‹</h1>
            <p class="meta mb-3">
              Ini ialah halaman pintu masuk untuk <b>Sistem Perekodan Kehadiran ROSES</b>.
              Klik <b>Login</b> untuk masuk ke aplikasi.
            </p>

            <div class="d-flex flex-wrap gap-2 align-items-center">
              <button id="btnLogin" class="btn btn-roses btn-lg text-white px-4">
                Login ke ROSES
              </button>
              <a class="link" href="https://script.google.com/macros/s/AKfycbw2SESSgVwauvEzzOXA144jg3LIE9DHQ5kVYYcFfNwP09SWFS-0z9C7wthI8tF7Xwlo7g/exec" target="_blank" rel="noopener">Buka terus Web App</a>
            </div>

            <div class="divider"></div>

            <div class="row g-2 align-items-center">
              <div class="col-md-6">
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" id="rememberMe">
                  <label class="form-check-label" for="rememberMe">Remember me</label>
                </div>
                <div class="meta mt-1">
                  Login terakhir: <b id="lastLogin">-</b>
                </div>
              </div>
              <div class="col-md-6 text-md-end">
                <button class="btn btn-outline-light btn-sm" id="btnClear">Padam simpanan</button>
              </div>
            </div>

            <div class="mt-3 meta">
              Jika selepas login berjaya anda menerima <i>token</i> pada URL (contoh: <code>#id_token=...</code>),
              gunakan halaman <a class="link" href="./profile.html">profile.html</a> untuk papar profil & simpan data.
            </div>
          </div>
        </div>

        <div class="text-center mt-4 meta">
          Â© ROSES â€¢ Dibina untuk penggunaan sekolah
        </div>
      </div>
    </div>
  </main>

<script>
  const KEY = "roses_gateway";
  function fmt(ts){
    try {
      const d = new Date(ts);
      return d.toLocaleString("ms-MY", { hour12:false });
    } catch(e){ return "-"; }
  }

  function loadState(){
    const st = JSON.parse(localStorage.getItem(KEY) || "{}");
    document.getElementById("rememberMe").checked = !!st.remember;
    document.getElementById("lastLogin").textContent = st.lastLogin ? fmt(st.lastLogin) : "-";
  }

  function saveState(partial){
    const st = JSON.parse(localStorage.getItem(KEY) || "{}");
    const next = Object.assign(st, partial);
    localStorage.setItem(KEY, JSON.stringify(next));
    loadState();
  }

  document.getElementById("rememberMe").addEventListener("change", (e)=>{
    saveState({ remember: e.target.checked });
  });

  document.getElementById("btnClear").addEventListener("click", ()=>{
    localStorage.removeItem(KEY);
    loadState();
  });

  document.getElementById("btnLogin").addEventListener("click", ()=>{
    const remember = document.getElementById("rememberMe").checked;
    if (remember) saveState({ lastLogin: Date.now() });
    window.location.href = "https://script.google.com/macros/s/AKfycbwI9RKhdx8R1df-VxGPT6uGwCdbLXv_4CNOa5ndmdgDPf6y2_lxurg7lkhpiHl_xV4RLQ/exec";
  });

  loadState();
</script>
</body>
</html>
